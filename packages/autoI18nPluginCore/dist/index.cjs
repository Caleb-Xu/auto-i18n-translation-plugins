"use strict";var t=require("@vitalets/google-translate-api"),n=require("tunnel"),e=require("axios"),r=require("crypto-js"),o=require("@babel/types"),a=require("node:fs"),i=require("node:path");function s(t){var n=Object.create(null);return t&&Object.keys(t).forEach((function(e){if("default"!==e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}})),n.default=t,Object.freeze(n)}var c=s(o),l=function(t,n){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},l(t,n)};function u(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}l(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var p=function(){return p=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},p.apply(this,arguments)};function f(t,n,e,r){return new(e||(e=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((r=r.apply(t,n||[])).next())}))}function g(t,n){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(e=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(t,i)}catch(t){s=[6,t],r=0}finally{e=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function h(t,n,e){if(e||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))}"function"==typeof SuppressedError&&SuppressedError;var d,y,v=function(){function t(t,n,e){this.queue=[],this.isRunning=!1,this.fn=t,this.delay=n,this.timeout=e}return t.prototype.execute=function(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return new Promise((function(e,r){t.queue.push({args:n,resolve:e,reject:r}),t.run(),t.timeout&&setTimeout((function(){r(new Error("IntervalQueue timeout"))}),t.timeout)}))},t.prototype.wait=function(){return f(this,arguments,void 0,(function(t){return void 0===t&&(t=this.delay),g(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){return setTimeout(n,t)}))];case 1:return n.sent(),[2]}}))}))},t.prototype.run=function(){return f(this,void 0,void 0,(function(){var t,n,e,r,o,a;return g(this,(function(i){switch(i.label){case 0:if(this.isRunning)return[2];i.label=1;case 1:if(!(t=this.queue.shift()))return[3,7];n=t.args,e=t.resolve,r=t.reject,this.isRunning=!0,i.label=2;case 2:return i.trys.push([2,4,,5]),o=e,[4,this.fn.apply(this,n)];case 3:return o.apply(void 0,[i.sent()]),[3,5];case 4:return a=i.sent(),r(a),[3,5];case 5:return[4,this.wait()];case 6:return i.sent(),[3,1];case 7:return this.isRunning=!1,[2]}}))}))},t}(),x=function(){function t(t){var n=this;this.defaultErrorHandler=function(t){var e=n.option.name;console.error("翻译api".concat(e?"【".concat(e,"】"):"","请求异常：").concat(n.getErrorMessage(t)))},this.option=this.getResultOption(t)}return t.prototype.getResultOption=function(t){var n,e,r,o=p({name:"",interval:0,onError:this.defaultErrorHandler},t);if(o.interval){o.fetchMethod=(n=this.option.fetchMethod,e=this.option.interval,r=new v(n.bind(null),e),function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.execute.apply(r,t)})}return o},t.prototype.getErrorMessage=function(t){return t instanceof Error?t.message:String(t)},t.prototype.translate=function(t,n,e){return f(this,void 0,void 0,(function(){var r,o;return g(this,(function(a){switch(a.label){case 0:r="",a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.option.fetchMethod(t,n,e)];case 2:return r=a.sent(),[3,4];case 3:return o=a.sent(),this.option.onError(o,this.defaultErrorHandler),[3,4];case 4:return[2,r]}}))}))},t}(),O=function(e){function r(r){var o=e.call(this,{name:"Google翻译",fetchMethod:function(e,a,i){return f(o,void 0,void 0,(function(){return g(this,(function(o){switch(o.label){case 0:return[4,t.translate(e,p({from:a,to:i},r.proxyOption?{fetchOptions:{agent:n.httpsOverHttp({proxy:r.proxyOption})}}:{}))];case 1:return[2,o.sent().text||""]}}))}))},onError:function(t,n){n(t),t instanceof Object&&"code"in t&&"ETIMEDOUT"===t.code&&console.error("❗ 请求超时，请确保你的网络可以访问google ❗")}})||this;return o}return u(r,e),r}(x),b=function(t){function n(n){var o,a=t.call(this,{name:"有道翻译",fetchMethod:function(t,o,i){return f(a,void 0,void 0,(function(){var a,s,c,l,u,p,f;return g(this,(function(g){switch(g.label){case 0:return a=(new Date).getTime(),s=Math.round((new Date).getTime()/1e3),c=n.appId+this.truncate(t)+a+s+n.appKey,l=r.SHA256(c).toString(r.enc.Hex),u={q:t,appKey:n.appId,salt:a,from:this.getTranslateKey(o),to:this.getTranslateKey(i),sign:l,signType:"v3",curtime:s},[4,e.post("https://openapi.youdao.com/api",u,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},proxy:n.proxy})];case 1:return p=g.sent(),[2,(null===(f=p.data.translation)||void 0===f?void 0:f[0])||""]}}))}))},onError:function(t,n){n(t),console.error("请前往有道翻译官方申请翻译key，默认会有50的额度，并请检查额度是否充足。")},interval:null!==(o=n.interval)&&void 0!==o?o:1e3})||this;return a.YOUDAO_TRANSLATE_KEY_CONVERT_MAP={"zh-cn":"zh-CHS","zh-tw":"zh-CHT"},a}return u(n,t),n.prototype.truncate=function(t){if(t.length<=20)return t;var n=t.length;return t.substring(0,10)+n+t.substring(n-10)},n.prototype.getTranslateKey=function(t){return this.YOUDAO_TRANSLATE_KEY_CONVERT_MAP[t]||t},n}(x),T=function(){function t(){}return t.originLang="",t}();!function(t){t.ZH="zh-cn",t.EN="en",t.JA="ja",t.KO="ko",t.RU="ru"}(d||(d={}));var S=((y={})[d.ZH]=/[\u4e00-\u9fff]/,y[d.EN]=/[a-zA-Z]/,y[d.JA]=/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]/,y[d.KO]=/[\uAC00-\uD7A3]/,y[d.RU]=/[йцукенгшщзхъфывапролджэячсмитьбюё .-]{1,}/,y);function m(t){var n=T.originLang;return S[n].test(t)}function w(t,n){for(var e=0;e<n.length;e++){if(("string"==typeof n[e]?new RegExp(n[e]):n[e]).test(t))return!0}return!1}function E(t){var n="";return o.isCallExpression(t)&&(n=o.isMemberExpression(t.callee)?function t(n,e){return e+="."+n.property.name,o.isMemberExpression(n.object)?t(n.object,e):e=n.object.name+e}(t.callee,""):t.callee.name||""),n}function j(t,n){var e=t.match(n);return e?e.filter((function(t,n){return e.indexOf(t)===n})):[]}function _(t,n,e){var r=exports.option.namespace,a=t.trim(),i=a.replace(/'/g,'"').replace(/(\n)/g,"\\n"),s=e||L(i);if(n){var c=o.stringLiteral(a);return c.extra={raw:"'".concat(i,"'"),rawValue:a},o.callExpression(o.identifier(exports.option.translateKey),[o.stringLiteral(s),c,o.stringLiteral(r)])}return"".concat(exports.option.translateKey,"('").concat(s,"','").concat(i,"','").concat(r,"')")}function L(t){for(var n=0,e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n|=0}return Math.abs(n).toString(36)+t.length.toString(36)}var A=function(t){return t.replace(/\\u[\dA-Fa-f]{4}/g,(function(t){return String.fromCharCode(parseInt(t.replace(/\\u/g,""),16))}))};function N(t,n){if(void 0===n&&(n=new WeakMap),"object"!=typeof t||null===t)return t;if(n.has(t))return n.get(t);if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t.source,t.flags);var e=Array.isArray(t)?[]:{};n.set(t,e);for(var r=0,o=h(h([],Object.keys(t),!0),Object.getOwnPropertySymbols(t).filter((function(n){return t.propertyIsEnumerable(n)})),!0);r<o.length;r++){var a=o[r];e[a]=N(t[a],n)}return e}var k=Object.freeze({__proto__:null,checkAgainstRegexArray:w,cloneDeep:N,createI18nTranslator:_,extractCnStrings:function(t){return j(t,/[^\x00-\xff]+/g)},extractFunctionName:E,extractStrings:j,generateId:L,hasOriginSymbols:m,removeComments:function(t){return t=(t=(t=t.replace(/\/\/.*?\n/g,"")).replace(/\/\*[\s\S]*?\*\//g,"")).replace(/<!--[\s\S]*?-->/g,"")},truncate:function(t){if(t.length<=20)return t;var n=t.length;return t.substring(0,10)+n+t.substring(n-10)},unicodeToString:A}),P={tab:{char:"\t",size:1},space:{char:" ",size:4}},K={type:"tab"},J=[],C=function(t){return"\\".concat(J.push(t),"\\")},F=function(t,n){return J[+n-1]},M=function(t,n){return new Array(t+1).join(n)};function R(t,n){void 0===n&&(n=K);var e="string"==typeof t?t:JSON.stringify(t),r=P[n.type];if(!r)throw new Error('Unrecognized indent type: "'.concat(n.type,'"'));return function(t,n){J=[];var e="",r=0;t=t.replace(/\\./g,C).replace(/(".*?"|'.*?')/g,C).replace(/\s+/g,"");for(var o=0;o<t.length;o++){var a=t.charAt(o);switch(a){case"{":case"[":e+=a+"\n"+M(++r,n);break;case"}":case"]":e+="\n"+M(--r,n)+a;break;case",":e+=",\n"+M(r,n);break;case":":e+=": ";break;default:e+=a}}return e.replace(/\[[\d,\s]+?\]/g,(function(t){return t.replace(/\s/g,"")})).replace(/\\(\d+)\\/g,F).replace(/\\(\d+)\\/g,F)}(e,M(n.size||r.size,r.char))}function U(){var t=exports.option.translateKey,n=exports.option.namespace,e=exports.option.originLang,r=h(h([],exports.option.targetLangList,!0),[e],!1).map((function(t){return[t.replace("-",""),t]})).map((function(t){return"'".concat(t[0],"': window?.").concat(n,"?.").concat(t[0]," || window._getJSONKey('").concat(t[1],"', langJSON)")})).join(",\n"),o="\n    // 导入国际化JSON文件\n    import langJSON from './index.json'\n    (function () {\n    // 定义翻译函数\n    let ".concat(t," = function (key, val, nameSpace) {\n      // 获取指定命名空间下的语言包\n      const langPackage = ").concat(t,"[nameSpace];\n      // 返回翻译结果，如果不存在则返回默认值\n      return (langPackage || {})[key] || val;\n    };\n    // 定义简单翻译函数，直接返回传入的值\n    let $").concat(t," = function (val) {\n      return val;\n    };\n    // 定义设置语言包的方法\n    ").concat(t,".locale = function (locale, nameSpace) {\n      // 将指定命名空间下的语言包设置为传入的locale\n      ").concat(t,"[nameSpace] = locale || {};\n    };\n    // 将翻译函数挂载到window对象上，如果已经存在则使用已有的\n    window.").concat(t," = window.").concat(t," || ").concat(t,";\n    // 将简单翻译函数挂载到window对象上\n    window.$").concat(t," = $").concat(t,";\n    // 定义从JSON文件中获取指定键的语言对象的方法\n    window._getJSONKey = function (key, insertJSONObj = undefined) {\n        // 获取JSON对象\n        const JSONObj = insertJSONObj;\n        // 初始化语言对象\n        const langObj = {};\n        // 遍历JSON对象的所有键\n        Object.keys(JSONObj).forEach((value) => {\n            // 将每个语言的对应键值添加到语言对象中\n            langObj[value] = JSONObj[value][key];\n        });\n        // 返回语言对象\n        return langObj;\n    };\n    })();\n    // 定义语言映射对象\n    const langMap = {\n        ").concat(r,"\n    };\n    // 从本地存储中获取当前语言，如果不存在则使用源语言\n    const lang = window.localStorage.getItem('").concat(n,"') || '").concat(e.replace("-",""),"';\n    // 根据当前语言设置翻译函数的语言包\n    window.").concat(t,".locale(langMap[lang], '").concat(n,"');\n  "),s=i.join(exports.option.globalPath,"index.js"),c=!0;a.existsSync(s)&&(c=L(o)!==L(a.readFileSync(s,"utf-8")));c&&a.writeFileSync(s,o)}function z(){var t=i.join(exports.option.globalPath,"index.json");a.existsSync(t)||a.writeFileSync(t,JSON.stringify({}))}function I(){var t=i.join(exports.option.globalPath,"index.json");try{return a.readFileSync(t,"utf-8")}catch(t){return"ENOENT"===t.code?console.log("❌读取JSON配置文件异常，文件不存在"):console.log("❌读取JSON配置文件异常，无法读取文件"),JSON.stringify({})}}function D(t,n){void 0===n&&(n=void 0);var e=n||JSON.parse(I()),r={};return Object.keys(e).forEach((function(n){r[n]=e[n][t]})),r}function q(t){var n=i.join(exports.option.globalPath,"index.json"),e=R(t);a.existsSync(n)?a.writeFileSync(n,e):console.log("❌JSON配置文件写入异常，文件不存在")}var $=Object.freeze({__proto__:null,buildSetLangConfigToIndexFile:function(){if(exports.option.buildToDist){var t={};exports.option.langKey.forEach((function(n){t[n]=D(n)})),a.existsSync(exports.option.distPath)&&a.readdir(exports.option.distPath,(function(n,e){n?console.error("❌构建文件夹为空，翻译配置无法写入"):e.forEach((function(n){if(n.startsWith(exports.option.distKey)&&n.endsWith(".js")){var e=i.join(exports.option.distPath,n);a.readFile(e,"utf-8",(function(n,r){if(n)return console.log(e),void console.error("❌构建主文件不存在，翻译配置无法写入");var o="";Object.keys(t).forEach((function(n){o+="window['".concat(exports.option.namespace,"']['").concat(n,"']=").concat(JSON.stringify(t[n]),";")}));try{a.writeFileSync(e,"window['".concat(exports.option.namespace,"']={};").concat(o)+r),console.info("恭喜：翻译配置写入构建主文件成功🌟🌟🌟")}catch(n){console.error("翻译配置写入构建主文件失败:",n)}}))}}))}))}},getLangObjByJSONFileWithLangKey:D,getLangTranslateJSONFile:I,initLangFile:function(){a.existsSync(exports.option.globalPath)||a.mkdirSync(exports.option.globalPath),z(),U()},initLangTranslateJSONFile:z,initTranslateBasicFnFile:U,setLangTranslateJSONFile:q});var H="\n┇┇┇\n",Y=/\n┇ *┇ *┇\n/,W={};function B(t,n){W[t]||(W[t]=n)}function G(){return W}function V(t,n,e){return f(this,void 0,void 0,(function(){var r,o,a,i;return g(this,(function(s){switch(s.label){case 0:return r={},Object.keys(t).forEach((function(e){n[e]||(r[e]=t[e])})),Object.values(r).length?(console.info("进入新增语言补全翻译..."),[4,X(r,e)]):[2];case 1:if((o=s.sent()).length!==Object.values(t).length)return console.error("翻译异常，翻译结果缺失❌"),[2];a=o,console.info("翻译成功⭐️⭐️⭐️"),Object.keys(r).forEach((function(t,e){n[t]=a[e]})),console.log("开始写入JSON配置文件..."),i=JSON.parse(I()),Object.keys(r).forEach((function(t){i[t][e]=n[t]}));try{q(i),console.info("JSON配置文件写入成功⭐️⭐️⭐️")}catch(t){console.error("❌JSON配置文件写入失败"+t)}return console.info("新增语言翻译补全成功⭐️⭐️⭐️"),[2]}}))}))}function X(t,n){return f(this,void 0,void 0,(function(){var e,r,o;return g(this,(function(a){switch(a.label){case 0:for(e=function(t,n){void 0===n&&(n=4500);for(var e=H.length,r=[],o=[],a=0,i=function(){if(o.length>0){var t=o.join(H).length;t>n&&console.warn("缓冲区提交异常：生成块长度 ".concat(t," 超过限制")),r.push(o.join(H)),o=[],a=0}},s=0,c=t;s<c.length;s++){var l=c[s],u=l.length+(o.length>0?e:0);l.length>n?(o.length>0&&i(),l.length>1.5*n&&console.warn("超长文本告警：检测到长度 ".concat(l.length," 字符的文本项，可能影响翻译质量")),r.push(l)):(a+u>n&&i(),a+=u,o.push(l))}return i(),r}(Object.values(t)),r=[],o=0;o<e.length;o++)r.push(exports.option.translator.translate(e[o],exports.option.originLang,n));return[4,Promise.all(r)];case 1:return[2,a.sent().map((function(t){var n=function(t,n){return t.split(n).map((function(t){return t.trim()}))};if(Y.test(t))return n(t,Y);var e=t.split("\n").find((function(t){return 3===t.length})),r=[];e&&(r=n(t,new RegExp("\\n".concat(e,"\\n"))));var o=r.filter(Boolean);return o.length>1?o:n(t,Y)})).flat()]}}))}))}var Z,Q,tt=Object.freeze({__proto__:null,SEPARATOR:H,SPLIT_SEPARATOR_REGEX:Y,autoTranslate:function(){return f(this,void 0,void 0,(function(){var t,n,e,r,o,a,i,s;return g(this,(function(c){switch(c.label){case 0:if(t={},exports.option.langKey.forEach((function(n){t[n]=D(n)})),n=JSON.parse(JSON.stringify(G())),e={},Object.keys(n).forEach((function(r){t[exports.option.originLang][r]||(e[r]=n[r])})),0===Object.keys(e).length)return console.info("✅ 当前没有需要翻译的新内容"),[2];r={},o=0,c.label=1;case 1:return o<exports.option.langKey.length?(a=exports.option.langKey[o],0===o?(r[exports.option.originLang]=Object.values(e),[3,3]):(console.info("开始自动翻译..."),[4,X(e,exports.option.langKey[o])])):[3,4];case 2:if((i=c.sent()).length!==Object.keys(e).length)return console.error("❌ 使用付费翻译时，请检查翻译API额度是否充足，或是否已申请对应翻译API使用权限（如使用有道翻译）"),console.error("❌ 翻译结果不完整\n                预期数量: ".concat(Object.keys(e).length,"\n                实际数量: ").concat(i.length,"\n                样例数据: ").concat(JSON.stringify(i.slice(0,3)))),[2];r[a]=i,console.info("✅ ".concat(a," 翻译完成")),c.label=3;case 3:return o++,[3,1];case 4:Object.keys(e).forEach((function(n,e){exports.option.langKey.forEach((function(o){t[o][n]=r[o][e]}))})),console.log("📄 构建配置文件数据结构..."),s={},Object.keys(t[exports.option.originLang]).forEach((function(n){s[n]={},exports.option.langKey.forEach((function(e){s[n][e]=t[e][n]}))}));try{q(s),console.info("🎉 多语言配置文件已成功更新")}catch(t){console.error("❌ 配置文件写入失败，原因:",t)}return[2]}}))}))},completionTranslateAndWriteConfigFile:V,getLangObj:G,initLangObj:function(t){Object.keys(W)||(W=t)},get langObj(){return W},languageConfigCompletion:function(t){var n=this;if(Object.keys(t)){var e=[],r=JSON.parse(I());exports.option.targetLangList.forEach((function(t){var n=D(t,r);e.push({key:t,curLangObj:n})})),e.forEach((function(e){return f(n,void 0,void 0,(function(){return g(this,(function(n){switch(n.label){case 0:return[4,V(t,e.curLangObj,e.key)];case 1:return n.sent(),[2]}}))}))}))}},setLangObj:B}),nt=function(t){function n(n){var o,a=t.call(this,{name:"百度翻译",fetchMethod:function(t,o,i){return f(a,void 0,void 0,(function(){var a,s,c,l,u;return g(this,(function(p){switch(p.label){case 0:return a=(new Date).getTime(),s={q:t,appid:n.appId,from:this.getTranslateKey(o),to:this.getTranslateKey(i),salt:a,sign:r.MD5(n.appId+t+a+n.appKey).toString()},[4,e.post("https://fanyi-api.baidu.com/api/trans/vip/translate",s,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},proxy:n.proxy})];case 1:return c=p.sent(),l=null===(u=c.data)||void 0===u?void 0:u.trans_result.map((function(t){return t.dst})).filter((function(t,n){return n%2==0})).join(H),[2,l||""]}}))}))},onError:function(t,n){n(t),console.error("请前往百度翻译官方申请翻译key，每个月都有免费额度，并请检查额度是否充足。")},interval:null!==(o=n.interval)&&void 0!==o?o:1e3})||this;return a.Baidu_TRANSLATE_KEY_CONVERT_MAP={"zh-cn":"zh",ja:"jp",ko:"kor"},a}return u(n,t),n.prototype.getTranslateKey=function(t){return this.Baidu_TRANSLATE_KEY_CONVERT_MAP[t]||t},n}(x),et=Object.freeze({__proto__:null,BaiduTranslator:nt,GoogleTranslator:O,Translator:x,YoudaoTranslator:b});!function(t){t.google="Google",t.youdao="Youdao"}(Z||(Z={})),exports.TranslateTypeEnum=void 0,(Q=exports.TranslateTypeEnum||(exports.TranslateTypeEnum={})).FULL_AUTO="full-auto",Q.SEMI_AUTO="semi-auto";var rt=["$i8n","console.log","$t","require","$$i8n","$$t","_createCommentVNode"],ot={translateKey:"$t",excludedCall:[],excludedPattern:[/\.\w+$/],excludedPath:["node_modules"],includePath:[/src\//,/src\\/],globalPath:"./lang",distPath:"",distKey:"index",originLang:d.ZH,targetLangList:["en"],langKey:[],namespace:"lang",buildToDist:!1,translator:new O({proxyOption:{port:7890,host:"127.0.0.1",headers:{"User-Agent":"Node"}}}),translatorOption:void 0,translateType:exports.TranslateTypeEnum.FULL_AUTO};function at(t){if(exports.option.translateType!==exports.TranslateTypeEnum.SEMI_AUTO){var n=t.node,e=t.parent,r=n.value;if(["zh-cn","ja","ko"].some((function(t){return exports.option.originLang.includes(t)||exports.option.originLang===t})))try{r=A(r)}catch(t){console.log("转换异常")}if(m(r)&&exports.option.excludedPattern.length&&!w(r,h([],exports.option.excludedPattern,!0))){var o=E(e);if(c.isImportDeclaration(e)||e.key===n||c.isCallExpression(e)&&o&&exports.option.excludedCall.includes(o))return;var a=void 0;if(c.isJSXAttribute(e)){var i=_(r,!0);a=c.jSXExpressionContainer(i)}else a=_(r,!0);t.replaceWith(a)}}}function it(t){var n,e=t.node;if(e.callee.name===exports.option.translateKey)if(exports.option.translateType===exports.TranslateTypeEnum.SEMI_AUTO){var r=e.arguments||[];if(1===r.length){var o=_((null===(n=r[0])||void 0===n?void 0:n.value)||"",!0);t.replaceWith(o),st(o)}}else exports.option.translateType===exports.TranslateTypeEnum.FULL_AUTO&&st(e)}function st(t){var n=t.arguments||[],e=c.isStringLiteral(n[0])?n[0].value:"",r=c.isStringLiteral(n[1])?n[1].value:"";e&&r&&c.isStringLiteral(n[1])&&B(e,r)}function ct(t){if(exports.option.translateType!==exports.TranslateTypeEnum.SEMI_AUTO){var n=t.node,e=t.parent;if(n.value){var r=n.value.raw||n.value.cooked;if(["zh-cn","ja","ko"].some((function(t){return exports.option.originLang.includes(t)||exports.option.originLang===t})))try{r=A(r)}catch(t){console.log("转换异常")}if(r&&m(r)&&exports.option.excludedPattern.length&&!w(r,h([],exports.option.excludedPattern,!0))){var a=E(e);if(o.isCallExpression(e)&&a&&exports.option.excludedCall.includes(a))return;var i=_(r);n.value.raw=n.value.cooked="${".concat(i,"}");var s=L(r);s&&r&&B(s,r)}}}}function lt(t){if(console.log("jsx text"),exports.option.translateType!==exports.TranslateTypeEnum.SEMI_AUTO){var n=t.node.value;if(["zh-cn","ja","ko"].some((function(t){return exports.option.originLang.includes(t)||exports.option.originLang===t})))try{n=A(n)}catch(t){console.log("转换异常")}if(m(n)&&exports.option.excludedPattern.length&&!w(n,h([],exports.option.excludedPattern,!0))){var e=_(n,!0),r=c.jSXExpressionContainer(e);t.replaceWith(r)}}}exports.option=p({},ot);var ut=Object.freeze({__proto__:null,default:function(){return{visitor:{StringLiteral:at,JSXText:lt,TemplateElement:ct,CallExpression:it}}}});exports.BaiduTranslator=nt,exports.FunctionFactoryOption=T,exports.GoogleTranslator=O,exports.Translator=x,exports.YoudaoTranslator=b,exports.baseUtils=k,exports.checkOption=function(){return exports.option.translateKey?exports.option.namespace?exports.option.buildToDist&&!exports.option.distKey?(console.log("❌请配置打包后生成文件的主文件名称"),!1):exports.option.buildToDist&&!exports.option.distPath?(console.log("❌请配置打包后生成文件的位置"),!1):exports.option.originLang?!(!exports.option.targetLangList||!exports.option.targetLangList.length)||(console.error("❌请配置目标翻译语言数组"),!1):(console.error("❌请配置来源语言"),!1):(console.error("❌请配置命名空间"),!1):(console.error("❌请配置翻译调用函数"),!1)},exports.fileUtils=$,exports.filter=ut,exports.initOption=function(t){exports.option=p(p({},ot),function(t){var n=N(t);return n.translator=null==t?void 0:t.translator,n.translator||(n.translator=n.translatorOption?new x(n.translatorOption):void 0),n.translator||delete n.translator,n}(t)),exports.option.langKey=h([exports.option.originLang],exports.option.targetLangList,!0),exports.option.excludedCall=h(h(h([],exports.option.excludedCall,!0),rt,!0),[exports.option.translateKey,"$"+exports.option.translateKey],!1)},exports.translateUtils=tt,exports.translator=et;
//# sourceMappingURL=index.cjs.map
