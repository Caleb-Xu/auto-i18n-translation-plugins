import{translate as n}from"@vitalets/google-translate-api";import t from"tunnel";import e from"axios";import r from"crypto-js";import*as o from"@babel/types";import a from"@babel/types";import i from"node:path";import c from"node:fs";var l=function(n,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])},l(n,t)};function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}l(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var u,f,g,h=function(){return h=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},h.apply(this,arguments)};function p(n,t,e,r){return new(e||(e=Promise))((function(o,a){function i(n){try{l(r.next(n))}catch(n){a(n)}}function c(n){try{l(r.throw(n))}catch(n){a(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(i,c)}l((r=r.apply(n,t||[])).next())}))}function d(n,t){var e,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(e=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(n,i)}catch(n){c=[6,n],r=0}finally{e=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function y(n,t,e){if(e||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,function(n){n.ZH="zh-cn",n.EN="en",n.JA="ja",n.KO="ko",n.RU="ru"}(u||(u={})),function(n){n.google="Google",n.youdao="Youdao"}(f||(f={})),function(n){n.FULL_AUTO="full-auto",n.SEMI_AUTO="semi-auto"}(g||(g={}));var v,b=new Map([["有道翻译","请前往有道翻译官方申请翻译key，默认会有50的额度，并请检查额度是否充足。"],["百度翻译","请前往百度翻译官方申请翻译key，每个月都有免费额度，并请检查额度是否充足。"]]),O=function(){function n(n,t,e){this.queue=[],this.isRunning=!1,this.fn=n,this.delay=t,this.timeout=e}return n.prototype.execute=function(){for(var n=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Promise((function(e,r){n.queue.push({args:t,resolve:e,reject:r}),n.run(),n.timeout&&setTimeout((function(){r(new Error("IntervalQueue timeout"))}),n.timeout)}))},n.prototype.wait=function(){return p(this,arguments,void 0,(function(n){return void 0===n&&(n=this.delay),d(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,n)}))];case 1:return t.sent(),[2]}}))}))},n.prototype.run=function(){return p(this,void 0,void 0,(function(){var n,t,e,r,o,a;return d(this,(function(i){switch(i.label){case 0:if(this.isRunning)return[2];i.label=1;case 1:if(!(n=this.queue.shift()))return[3,7];t=n.args,e=n.resolve,r=n.reject,this.isRunning=!0,i.label=2;case 2:return i.trys.push([2,4,,5]),o=e,[4,this.fn.apply(this,t)];case 3:return o.apply(void 0,[i.sent()]),[3,5];case 4:return a=i.sent(),r(a),[3,5];case 5:return[4,this.wait()];case 6:return i.sent(),[3,1];case 7:return this.isRunning=!1,[2]}}))}))},n}(),m=function(){function n(n){var t,e,r;this.option=n,this.option.interval&&(this.option.fetchMethod=(t=this.option.fetchMethod,e=this.option.interval,r=new O(t.bind(null),e),function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return r.execute.apply(r,n)}))}return n.prototype.getErrorMessage=function(n){return n instanceof Error?n.message:String(n)},n.prototype.translate=function(n,t,e){return p(this,void 0,void 0,(function(){var r,o,a;return d(this,(function(i){switch(i.label){case 0:r="",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.option.fetchMethod(n,t,e)];case 2:return r=i.sent(),[3,4];case 3:return o=i.sent(),a=this.option.name,console.error("翻译api".concat(a?"【".concat(a,"】"):"","请求异常：").concat(this.getErrorMessage(o))+"\n"+b&&b.has(a)&&b.get(a)),[3,4];case 4:return[2,r]}}))}))},n}(),S=function(e){function r(r){var o=e.call(this,{name:"Google翻译",fetchMethod:function(e,a,i){return p(o,void 0,void 0,(function(){return d(this,(function(o){switch(o.label){case 0:return[4,n(e,h({from:a,to:i},r.proxyOption?{fetchOptions:{agent:t.httpsOverHttp({proxy:r.proxyOption})}}:{}))];case 1:return[2,o.sent().text||""]}}))}))}})||this;return o}return s(r,e),r}(m),T=function(n){function t(t){var o,a=n.call(this,{name:"有道翻译",fetchMethod:function(n,o,i){return p(a,void 0,void 0,(function(){var a,c,l,s,u,f,g;return d(this,(function(h){switch(h.label){case 0:return a=(new Date).getTime(),c=Math.round((new Date).getTime()/1e3),l=t.appId+this.truncate(n)+a+c+t.appKey,s=r.SHA256(l).toString(r.enc.Hex),u={q:n,appKey:t.appId,salt:a,from:this.getTranslateKey(o),to:this.getTranslateKey(i),sign:s,signType:"v3",curtime:c},[4,e.post("https://openapi.youdao.com/api",u,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},proxy:t.proxy})];case 1:return f=h.sent(),[2,(null===(g=f.data.translation)||void 0===g?void 0:g[0])||""]}}))}))},interval:null!==(o=t.interval)&&void 0!==o?o:1e3})||this;return a.YOUDAO_TRANSLATE_KEY_CONVERT_MAP={"zh-cn":"zh-CHS","zh-tw":"zh-CHT"},a}return s(t,n),t.prototype.truncate=function(n){if(n.length<=20)return n;var t=n.length;return n.substring(0,10)+t+n.substring(t-10)},t.prototype.getTranslateKey=function(n){return this.YOUDAO_TRANSLATE_KEY_CONVERT_MAP[n]||n},t}(m),j=function(){function n(){}return n.originLang="",n}(),x=((v={})[u.ZH]=/[\u4e00-\u9fff]/,v[u.EN]=/[a-zA-Z]/,v[u.JA]=/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]/,v[u.KO]=/[\uAC00-\uD7A3]/,v[u.RU]=/[йцукенгшщзхъфывапролджэячсмитьбюё .-]{1,}/,v);function w(n){var t=j.originLang;return x[t].test(n)}function E(n,t){for(var e=0;e<t.length;e++){if(("string"==typeof t[e]?new RegExp(t[e]):t[e]).test(n))return!0}return!1}function L(n){var t="";return a.isCallExpression(n)&&(t=a.isMemberExpression(n.callee)?function n(t,e){return e+="."+t.property.name,a.isMemberExpression(t.object)?n(t.object,e):e=t.object.name+e}(n.callee,""):n.callee.name||""),t}function _(n,t){var e=n.match(t);return e?e.filter((function(n,t){return e.indexOf(n)===t})):[]}function A(n,t,e){var r=an.namespace,o=n.trim(),i=o.replace(/'/g,'"').replace(/(\n)/g,"\\n"),c=e||N(i);if(t){var l=a.stringLiteral(o);return l.extra={raw:"'".concat(i,"'"),rawValue:o},a.callExpression(a.identifier(an.translateKey),[a.stringLiteral(c),l,a.stringLiteral(r)])}return"".concat(an.translateKey,"('").concat(c,"','").concat(i,"','").concat(r,"')")}function N(n){for(var t=0,e=0;e<n.length;e++){t=(t<<5)-t+n.charCodeAt(e),t|=0}return Math.abs(t).toString(36)+n.length.toString(36)}var k=function(n){return n.replace(/\\u[\dA-Fa-f]{4}/g,(function(n){return String.fromCharCode(parseInt(n.replace(/\\u/g,""),16))}))};function P(n,t){if(void 0===t&&(t=new WeakMap),"object"!=typeof n||null===n)return n;if(t.has(n))return t.get(n);if(n instanceof Date)return new Date(n);if(n instanceof RegExp)return new RegExp(n.source,n.flags);var e=Array.isArray(n)?[]:{};t.set(n,e);for(var r=0,o=y(y([],Object.keys(n),!0),Object.getOwnPropertySymbols(n).filter((function(t){return n.propertyIsEnumerable(t)})),!0);r<o.length;r++){var a=o[r];e[a]=P(n[a],t)}return e}var K=Object.freeze({__proto__:null,checkAgainstRegexArray:E,cloneDeep:P,createI18nTranslator:A,extractCnStrings:function(n){return _(n,/[^\x00-\xff]+/g)},extractFunctionName:L,extractStrings:_,generateId:N,hasOriginSymbols:w,removeComments:function(n){return n=(n=(n=n.replace(/\/\/.*?\n/g,"")).replace(/\/\*[\s\S]*?\*\//g,"")).replace(/<!--[\s\S]*?-->/g,"")},truncate:function(n){if(n.length<=20)return n;var t=n.length;return n.substring(0,10)+t+n.substring(t-10)},unicodeToString:k}),J={tab:{char:"\t",size:1},space:{char:" ",size:4}},F={type:"tab"},C=[],M=function(n){return"\\".concat(C.push(n),"\\")},R=function(n,t){return C[+t-1]},I=function(n,t){return new Array(n+1).join(t)};function U(n,t){void 0===t&&(t=F);var e="string"==typeof n?n:JSON.stringify(n),r=J[t.type];if(!r)throw new Error('Unrecognized indent type: "'.concat(t.type,'"'));return function(n,t){C=[];var e="",r=0;n=n.replace(/\\./g,M).replace(/(".*?"|'.*?')/g,M).replace(/\s+/g,"");for(var o=0;o<n.length;o++){var a=n.charAt(o);switch(a){case"{":case"[":e+=a+"\n"+I(++r,t);break;case"}":case"]":e+="\n"+I(--r,t)+a;break;case",":e+=",\n"+I(r,t);break;case":":e+=": ";break;default:e+=a}}return e.replace(/\[[\d,\s]+?\]/g,(function(n){return n.replace(/\s/g,"")})).replace(/\\(\d+)\\/g,R).replace(/\\(\d+)\\/g,R)}(e,I(t.size||r.size,r.char))}function z(){var n=an.translateKey,t=an.namespace,e=an.originLang,r=y(y([],an.targetLangList,!0),[e],!1).map((function(n){return[n.replace("-",""),n]})).map((function(n){return"'".concat(n[0],"': (globalThis && globalThis.").concat(t," && globalThis.").concat(t,".").concat(n[0],") ? globalThis.").concat(t,".").concat(n[0]," : globalThis._getJSONKey('").concat(n[1],"', langJSON)")})).join(",\n"),o="\n    // 导入国际化JSON文件\n    import langJSON from './index.json'\n    (function () {\n    // 定义翻译函数\n    let ".concat(n," = function (key, val, nameSpace) {\n      // 获取指定命名空间下的语言包\n      const langPackage = ").concat(n,"[nameSpace];\n      // 返回翻译结果，如果不存在则返回默认值\n      return (langPackage || {})[key] || val;\n    };\n    // 定义简单翻译函数，直接返回传入的值\n    let $").concat(n," = function (val) {\n      return val;\n    };\n    // 定义设置语言包的方法\n    ").concat(n,".locale = function (locale, nameSpace) {\n      // 将指定命名空间下的语言包设置为传入的locale\n      ").concat(n,"[nameSpace] = locale || {};\n    };\n    // 将翻译函数挂载到globalThis对象上，如果已经存在则使用已有的\n    globalThis.").concat(n," = globalThis.").concat(n," || ").concat(n,";\n    // 将简单翻译函数挂载到globalThis对象上\n    globalThis.$").concat(n," = $").concat(n,";\n    // 定义从JSON文件中获取指定键的语言对象的方法\n    globalThis._getJSONKey = function (key, insertJSONObj = undefined) {\n        // 获取JSON对象\n        const JSONObj = insertJSONObj;\n        // 初始化语言对象\n        const langObj = {};\n        // 遍历JSON对象的所有键\n        Object.keys(JSONObj).forEach((value) => {\n            // 将每个语言的对应键值添加到语言对象中\n            langObj[value] = JSONObj[value][key];\n        });\n        // 返回语言对象\n        return langObj;\n    };\n    })();\n    // 定义语言映射对象\n    const langMap = {\n        ").concat(r,"\n    };\n    // 存储语言是否存在\n    // 判断 globalThis.localStorage.getItem 是否为函数\n    const isFunction = (fn) => {\n        return typeof fn === 'function';\n    };\n    const withStorageLang = isFunction && globalThis && globalThis.localStorage && \n    isFunction(globalThis.localStorage.getItem) && globalThis.localStorage.getItem('").concat(t,"');\n    // 从本地存储中获取当前语言，如果不存在则使用源语言\n    const lang = withStorageLang ? globalThis.localStorage.getItem('").concat(t,"') : '").concat(e.replace("-",""),"';\n    // 根据当前语言设置翻译函数的语言包\n    globalThis.").concat(n,".locale(langMap[lang], '").concat(t,"');\n  "),a=i.join(an.globalPath,"index.js"),l=!0;c.existsSync(a)&&(l=N(o)!==N(c.readFileSync(a,"utf-8")));l&&c.writeFileSync(a,o)}function D(){var n=i.join(an.globalPath,"index.json");c.existsSync(n)||c.writeFileSync(n,JSON.stringify({}))}function $(){var n=i.join(an.globalPath,"index.json");try{return c.readFileSync(n,"utf-8")}catch(n){return"ENOENT"===n.code?console.log("❌读取JSON配置文件异常，文件不存在"):console.log("❌读取JSON配置文件异常，无法读取文件"),JSON.stringify({})}}function H(n,t){void 0===t&&(t=void 0);var e=t||JSON.parse($()),r={};return Object.keys(e).forEach((function(t){r[t]=e[t][n]})),r}function W(n){var t=i.join(an.globalPath,"index.json"),e=U(n);c.existsSync(t)?c.writeFileSync(t,e):console.log("❌JSON配置文件写入异常，文件不存在")}var Y=Object.freeze({__proto__:null,buildSetLangConfigToIndexFile:function(){if(an.buildToDist){var n={};an.langKey.forEach((function(t){n[t]=H(t)})),c.existsSync(an.distPath)&&c.readdir(an.distPath,(function(t,e){t?console.error("❌构建文件夹为空，翻译配置无法写入"):e.forEach((function(t){if(t.startsWith(an.distKey)&&t.endsWith(".js")){var e=i.join(an.distPath,t);c.readFile(e,"utf-8",(function(t,r){if(t)return console.log(e),void console.error("❌构建主文件不存在，翻译配置无法写入");var o="";Object.keys(n).forEach((function(t){o+="globalThis['".concat(an.namespace,"']['").concat(t,"']=").concat(JSON.stringify(n[t]),";")}));try{c.writeFileSync(e,"globalThis['".concat(an.namespace,"']={};").concat(o)+r),console.info("恭喜：翻译配置写入构建主文件成功🌟🌟🌟")}catch(t){console.error("翻译配置写入构建主文件失败:",t)}}))}}))}))}},getLangObjByJSONFileWithLangKey:H,getLangTranslateJSONFile:$,initLangFile:function(){c.existsSync(an.globalPath)||c.mkdirSync(an.globalPath),D(),z()},initLangTranslateJSONFile:D,initTranslateBasicFnFile:z,setLangTranslateJSONFile:W});var q="\n┇┇┇\n",B=/\n┇ *┇ *┇\n/,V={};function G(n,t){V[n]||(V[n]=t)}function X(){return V}function Z(n,t,e){return p(this,void 0,void 0,(function(){var r,o,a,i;return d(this,(function(c){switch(c.label){case 0:return r={},Object.keys(n).forEach((function(e){t[e]||(r[e]=n[e])})),Object.values(r).length?(console.info("进入新增语言补全翻译..."),[4,Q(r,e)]):[2];case 1:if((o=c.sent()).length!==Object.values(n).length)return console.error("翻译异常，翻译结果缺失❌"),[2];a=o,console.info("翻译成功⭐️⭐️⭐️"),Object.keys(r).forEach((function(n,e){t[n]=a[e]})),console.log("开始写入JSON配置文件..."),i=JSON.parse($()),Object.keys(r).forEach((function(n){i[n][e]=t[n]}));try{W(i),console.info("JSON配置文件写入成功⭐️⭐️⭐️")}catch(n){console.error("❌JSON配置文件写入失败"+n)}return console.info("新增语言翻译补全成功⭐️⭐️⭐️"),[2]}}))}))}function Q(n,t){return p(this,void 0,void 0,(function(){var e,r,o;return d(this,(function(a){switch(a.label){case 0:for(e=function(n,t){void 0===t&&(t=4500);for(var e=q.length,r=[],o=[],a=0,i=function(){if(o.length>0){var n=o.join(q).length;n>t&&console.warn("缓冲区提交异常：生成块长度 ".concat(n," 超过限制")),r.push(o.join(q)),o=[],a=0}},c=0,l=n;c<l.length;c++){var s=l[c],u=s.length+(o.length>0?e:0);s.length>t?(o.length>0&&i(),s.length>1.5*t&&console.warn("超长文本告警：检测到长度 ".concat(s.length," 字符的文本项，可能影响翻译质量")),r.push(s)):(a+u>t&&i(),a+=u,o.push(s))}return i(),r}(Object.values(n)),r=[],o=0;o<e.length;o++)r.push(an.translator.translate(e[o],an.originLang,t));return[4,Promise.all(r)];case 1:return[2,a.sent().map((function(n){var t=function(n,t){return n.split(t).map((function(n){return n.trim()}))};if(B.test(n))return t(n,B);var e=n.split("\n").find((function(n){return 3===n.length})),r=[];e&&(r=t(n,new RegExp("\\n".concat(e,"\\n"))));var o=r.filter(Boolean);return o.length>1?o:t(n,B)})).flat()]}}))}))}var nn=Object.freeze({__proto__:null,SEPARATOR:q,SPLIT_SEPARATOR_REGEX:B,autoTranslate:function(){return p(this,void 0,void 0,(function(){var n,t,e,r,o,a,i,c;return d(this,(function(l){switch(l.label){case 0:if(n={},an.langKey.forEach((function(t){n[t]=H(t)})),t=JSON.parse(JSON.stringify(X())),e={},Object.keys(t).forEach((function(r){n[an.originLang][r]||(e[r]=t[r])})),0===Object.keys(e).length)return console.info("✅ 当前没有需要翻译的新内容"),[2];r={},o=0,l.label=1;case 1:return o<an.langKey.length?(a=an.langKey[o],0===o?(r[an.originLang]=Object.values(e),[3,3]):(console.info("开始自动翻译..."),[4,Q(e,an.langKey[o])])):[3,4];case 2:if((i=l.sent()).length!==Object.keys(e).length)return console.error("❌ 使用付费翻译时，请检查翻译API额度是否充足，或是否已申请对应翻译API使用权限（如使用有道翻译）"),console.error("❌ 翻译结果不完整\n                预期数量: ".concat(Object.keys(e).length,"\n                实际数量: ").concat(i.length,"\n                样例数据: ").concat(JSON.stringify(i.slice(0,3)))),[2];r[a]=i,console.info("✅ ".concat(a," 翻译完成")),l.label=3;case 3:return o++,[3,1];case 4:Object.keys(e).forEach((function(t,e){an.langKey.forEach((function(o){n[o][t]=r[o][e]}))})),console.log("📄 构建配置文件数据结构..."),c={},Object.keys(n[an.originLang]).forEach((function(t){c[t]={},an.langKey.forEach((function(e){c[t][e]=n[e][t]}))}));try{W(c),console.info("🎉 多语言配置文件已成功更新")}catch(n){console.error("❌ 配置文件写入失败，原因:",n)}return[2]}}))}))},completionTranslateAndWriteConfigFile:Z,getLangObj:X,initLangObj:function(n){Object.keys(V)||(V=n)},get langObj(){return V},languageConfigCompletion:function(n){var t=this;if(Object.keys(n)){var e=[],r=JSON.parse($());an.targetLangList.forEach((function(n){var t=H(n,r);e.push({key:n,curLangObj:t})})),e.forEach((function(e){return p(t,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return[4,Z(n,e.curLangObj,e.key)];case 1:return t.sent(),[2]}}))}))}))}},setLangObj:G}),tn=function(n){function t(t){var o,a=n.call(this,{name:"百度翻译",fetchMethod:function(n,o,i){return p(a,void 0,void 0,(function(){var a,c,l,s,u;return d(this,(function(f){switch(f.label){case 0:return a=(new Date).getTime(),c={q:n,appid:t.appId,from:this.getTranslateKey(o),to:this.getTranslateKey(i),salt:a,sign:r.MD5(t.appId+n+a+t.appKey).toString()},[4,e.post("https://fanyi-api.baidu.com/api/trans/vip/translate",c,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},proxy:t.proxy})];case 1:return l=f.sent(),s=null===(u=l.data)||void 0===u?void 0:u.trans_result.map((function(n){return n.dst})).filter((function(n,t){return t%2==0})).join(q),[2,s||""]}}))}))},interval:null!==(o=t.interval)&&void 0!==o?o:1e3})||this;return a.Baidu_TRANSLATE_KEY_CONVERT_MAP={"zh-cn":"zh",ja:"jp",ko:"kor"},a}return s(t,n),t.prototype.getTranslateKey=function(n){return this.Baidu_TRANSLATE_KEY_CONVERT_MAP[n]||n},t}(m),en=Object.freeze({__proto__:null,BaiduTranslator:tn,GoogleTranslator:S,Translator:m,YoudaoTranslator:T}),rn=["$i8n","console.log","$t","require","$$i8n","$$t","_createCommentVNode"],on={translateKey:"$t",excludedCall:[],excludedPattern:[/\.\w+$/],excludedPath:["node_modules"],includePath:[/src\//,/src\\/],globalPath:"./lang",distPath:"",distKey:"index",originLang:u.ZH,targetLangList:["en"],langKey:[],namespace:"lang",buildToDist:!1,translator:new S({proxyOption:{port:7890,host:"127.0.0.1",headers:{"User-Agent":"Node"}}}),translatorOption:void 0,translateType:g.FULL_AUTO},an=h({},on);function cn(n){an=h(h({},on),function(n){var t=P(n);return t.translator=null==n?void 0:n.translator,t.translator||(t.translator=t.translatorOption?new m(t.translatorOption):void 0),t.translator||delete t.translator,t}(n)),an.langKey=y([an.originLang],an.targetLangList,!0),an.excludedCall=y(y(y([],an.excludedCall,!0),rn,!0),[an.translateKey,"$"+an.translateKey],!1)}function ln(){return an.translateKey?an.namespace?an.buildToDist&&!an.distKey?(console.log("❌请配置打包后生成文件的主文件名称"),!1):an.buildToDist&&!an.distPath?(console.log("❌请配置打包后生成文件的位置"),!1):an.originLang?!(!an.targetLangList||!an.targetLangList.length)||(console.error("❌请配置目标翻译语言数组"),!1):(console.error("❌请配置来源语言"),!1):(console.error("❌请配置命名空间"),!1):(console.error("❌请配置翻译调用函数"),!1)}function sn(n){if(an.translateType!==g.SEMI_AUTO){var t=n.node,e=n.parent,r=t.value;if(["zh-cn","ja","ko"].some((function(n){return an.originLang.includes(n)||an.originLang===n})))try{r=k(r)}catch(n){console.log("转换异常")}if(w(r)&&an.excludedPattern.length&&!E(r,y([],an.excludedPattern,!0))){var a=L(e);if(o.isImportDeclaration(e)||e.key===t||o.isCallExpression(e)&&a&&an.excludedCall.includes(a))return;var i=void 0;if(o.isJSXAttribute(e)){var c=A(r,!0);i=o.jSXExpressionContainer(c)}else i=A(r,!0);n.replaceWith(i)}}}function un(n){var t,e=n.node;if(e.callee.name===an.translateKey)if(an.translateType===g.SEMI_AUTO){var r=e.arguments||[];if(1===r.length){var o=A((null===(t=r[0])||void 0===t?void 0:t.value)||"",!0);n.replaceWith(o),fn(o)}}else an.translateType===g.FULL_AUTO&&fn(e)}function fn(n){var t=n.arguments||[],e=o.isStringLiteral(t[0])?t[0].value:"",r=o.isStringLiteral(t[1])?t[1].value:"";e&&r&&o.isStringLiteral(t[1])&&G(e,r)}function gn(n){if(an.translateType!==g.SEMI_AUTO){var t=n.node,e=n.parent;if(t.value){var r=t.value.raw||t.value.cooked;if(["zh-cn","ja","ko"].some((function(n){return an.originLang.includes(n)||an.originLang===n})))try{r=k(r)}catch(n){console.log("转换异常")}if(r&&w(r)&&an.excludedPattern.length&&!E(r,y([],an.excludedPattern,!0))){var o=L(e);if(a.isCallExpression(e)&&o&&an.excludedCall.includes(o))return;var i=A(r);t.value.raw=t.value.cooked="${".concat(i,"}");var c=N(r);c&&r&&G(c,r)}}}}function hn(n){if(console.log("jsx text"),an.translateType!==g.SEMI_AUTO){var t=n.node.value;if(["zh-cn","ja","ko"].some((function(n){return an.originLang.includes(n)||an.originLang===n})))try{t=k(t)}catch(n){console.log("转换异常")}if(w(t)&&an.excludedPattern.length&&!E(t,y([],an.excludedPattern,!0))){var e=A(t,!0),r=o.jSXExpressionContainer(e);n.replaceWith(r)}}}var pn=Object.freeze({__proto__:null,default:function(){return{visitor:{StringLiteral:sn,JSXText:hn,TemplateElement:gn,CallExpression:un}}}});export{tn as BaiduTranslator,j as FunctionFactoryOption,S as GoogleTranslator,g as TranslateTypeEnum,m as Translator,T as YoudaoTranslator,K as baseUtils,ln as checkOption,Y as fileUtils,pn as filter,cn as initOption,an as option,nn as translateUtils,en as translator};
//# sourceMappingURL=index.mjs.map
